## Обзор

WebBlog API — это RESTful сервис, который предоставляет функциональность для управления блогами, постами и комментариями. API поддерживает регистрацию пользователей, аутентификацию и авторизацию, позволяя пользователям создавать и управлять содержимым своих блогов.

## Базовый URL

```
http://localhost:5107
```

## Аутентификация

API использует JWT (JSON Web Token) для аутентификации. Для доступа к защищенным конечным точкам необходимо включить JWT токен в заголовок Authorization вашего запроса:

```
Authorization: Bearer {your_jwt_token}
```

Вы можете получить JWT токен, зарегистрировавшись или войдя в систему с помощью конечных точек аутентификации.
## Запуск

```
docker-compose up --build
```

---
# Конечные точки (Endpoints)
---
## Пользователи

#### Регистрация

- **URL**: `api/Account/register`
- **Метод**: `POST`
- **Описание**: Регистрация нового пользователя
- **Запрос**:
```json
{
    "Username": "string",
    "Email": "string",
    "Password": "string",
    "ConfirmPassword": "string"
}
```
- **Успешный ответ**: `200 Ok`
```json
{
    "user": {
        "id": 1,
        "username": "user123",
        "email": "user@example.com"
    },
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**Возможные коды ответов:**

200 OK - Успешная регистрация
204 No Contect - Пользователь уже зарегистрирован
400 Bad Request - Ошибка валидации данных

---
#### Вход в систему

- **URL**: `api/Account/login`
- **Метод**: `POST`
- **Описание**: Вход в систему
- **Запрос**:
```json
{
    "UsernameOrEmail": "user@exampdle.com",
    "Password": "YourPasdsword123"
}
```
- **Успешный ответ**: `200 OK`
```json
{
    "user": {
        "id": 1,
        "username": "examplde_user",
        "email": "user@exampdle.com"
    },
    "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyIiwidXNlcm5hbWUiOiJleGFtcGxkZV91c2VyIiwiZW1haWwiOiJ1c2VyQGV4YW1wZGxlLmNvbSIsIm5iZiI6MTc0NDc5Nzk5NSwiZXhwIjoxNzQ1NDAyNzk1LCJpYXQiOjE3NDQ3OTc5OTV9.bwOEFiEnYjejfzfOTRs8mMA5qOx1i3iyZt7LXYjvxpbaSL8Rp8vWihGB70EZ0oGGVnj1znLiEYRNYBzthGKs5w"
}
```

**Возможные коды ответов:**

200 OK - Успешный вход
204 No Content - Неверные учетные данные

---
#### Получение информации о пользователе

- **URL**: `/api/Account/profile`
- **Метод**: `GET`
- **Авторизация**: Требуется JWT токен
- Описание**: Возвращает информацию о текущем авторизованном пользователе.
- **Успешный ответ**: `200 OK`
```json
{
	"id": 1,
	"username": "user123",
	"email": "user@example.com"
}
```
**Возможные коды ответов:**

200 OK - Успешный запрос
401 Unauthorized - Отсутствие авторизации
404 Not Found - Пользователь не найден

## Блоги 
#### Создание блога

- **URL**: `/api/blog`
- **Метод**: `POST`
- **Авторизация**: Требуется JWT токен
- **Описание**: Создание нового блога
- **Запрос**:
```json
{
	"title": "Мой блог",
	"description": "Блог о программировании и технологиях"
}
  ```
- **Успешный ответ**: `201 Created`
```json
{
	"id": 1,
	"title": "Мой блог",
	"description": "Блог о программировании и технологиях",
	"owner": 
	{
		"id": 1,
		"username": "user123",
		"email": "user@example.com"
	},
	"createdAt": "2025-04-14T12:00:00Z",
	"updatedAt": "2025-04-14T12:00:00Z"
}
```

**Возможные коды ответов:**

201 Created - Блог успешно создан
401 Unauthorized - Отсутствие авторизации
400 Bad Request - Ошибка валидации данных

---
#### Обновление блога

- **URL**: `/api/Blog/{id}`
- **Метод**: `PUT`
- **Авторизация**: Требуется JWT токен
- **Описание**: Обновление существующего блога
- **Запрос**:
```json
{
	"title": "Обновленный блог" (необязательное поле),
	"description": "Новое описание блога" (необязательное поле)
}
```
- **Успешный ответ**: `200 OK`
```json
{
	"id": 1,
	"title": "Обновленный блог",
	"description": "Новое описание блога",
	"owner": 
	{
		"id": 1,
		"username": "user123",
		"email": "user@example.com"
	},
	"createdAt": "2025-04-14T12:00:00Z",
	"updatedAt": "2025-04-14T13:30:00Z"
}
```

**Возможные коды ответов:**

200 OK - Блог успешно обновлен
401 Unauthorized - Отсутствие авторизации
404 Not Found - Блог не найден или не принадлежит пользователю

---
#### Получение блога по ID

- **URL**: `/api/Blog/{blogId}`
- **Метод**: `GET`
- **Описание**: Получение информации о блоге по ID
- **Успешный ответ**: `200 OK`
```json
{
	"id": 1,
	"title": "Мой блог",
	"description": "Блог о программировании и технологиях",
	"owner": 
	{
		"id": 1,
		"username": "user123",
		"email": "user@example.com"
	},
	"createdAt": "2025-04-14T12:00:00Z",
	"updatedAt": "2025-04-14T12:00:00Z"
}
```

**Возможные коды ответов:**

200 OK - Успешный запрос
404 Not Found - Блог не найден

---
#### Получение блогов пользователя по его ID

- **URL**: `/api/Blog/user/{userId}`
- **Метод**: `GET`
- **Описание**: Возвращает информацию о блогах пользователя
- **Успешный ответ**: `200 OK`
```json
[
	{
		"id": 1,
		"title": "Мой блог",
		"description": "Блог о программировании и технологиях",
		"owner": 
		{
			"id": 1,
			"username": "user123",
			"email": "user@example.com"
		},
		"createdAt": "2025-04-14T12:00:00Z",
		"updatedAt": "2025-04-14T12:00:00Z"
	}
]
```

**Возможные коды ответов:**

200 OK - Успешный запрос
404 Not Found - Блог пользователя не найден

---
#### Получение всех блогов

- **URL**: `/api/Blog`
- **Метод**: `GET`
- **Описание**: Получение списка всех блогов
- **Успешный ответ**: `200 OK`
```json
[
	{
		"id": 1,
		"title": "Мой блог",
		"description": "Блог о программировании и технологиях",
		"owner": 
		{
			"id": 1,
			"username": "user123",
			"email": "user@example.com"
		},
		"createdAt": "2025-04-14T12:00:00Z",
		"updatedAt": "2025-04-14T12:00:00Z"
	},
	{
		"id": 2,
		"title": "Другой блог",
		"description": "Блог о путешествиях",
		"owner": 
		{
			"id": 2,
			"username": "traveler",
			"email": "traveler@example.com"
		},
		"createdAt": "2025-04-13T15:30:00Z",
		"updatedAt": "2025-04-13T15:30:00Z"
	}
]
```

**Возможные коды ответов:**

200 OK - Успешный запрос

--- 
### Посты
---
#### Создание поста

- **URL**: /api/Post`
- **Метод**: `POST`
- **Авторизация**: Требуется JWT токен
- **Описание**: Создание нового поста в блоге
- **Запрос**:
```json
{
	"blogId": 1,
	"title": "Мой первый пост",
	"content": "Содержание поста...",
	"imageUrl": "https://example.com/image.jpg" (необязательное поле)
}
```
- **Успешный ответ**: `201 Created`
```json
{
	"id": 1,
	"title": "Мой первый пост",
	"content": "Содержание поста...",
	"imageUrl": "https://example.com/image.jpg" (nullable),
	"blogId": 1,
	"blogTitle": "Мой блог",
	"authorUsername": "user123",
	"createdAt": "2025-04-14T14:00:00Z",
	"updatedAt": "2025-04-14T14:00:00Z",
	"comments": 
	[
		{
			"id": 1,
			"content": "коммент говна",
			"authorUsername": "examplde_user",
			"createdAt": "2025-04-16T14:05:12.765352Z"
		},
		{
			"id": 2,
			"content": "комменdт говна",
			"authorUsername": "examplde_user",
			"createdAt": "2025-04-16T14:28:33.021375Z"
		}
	],
	"commentsCount": 0
}
```

**Возможные коды ответов:**

201 Created - Пост успешно создан
400 Bad Request - Пользователь не имеет блога или ошибка валидации
401 Unauthorized - Отсутствие авторизации

---
#### Обновление поста

- **URL**: `/api/Post/{postId}`
- **Метод**: `PUT`
- **Авторизация**: Требуется JWT токен
- **Описание**: Обновление существующего поста
- **Запрос**:
```json
{
	"title": "Обновленный заголовок" (необязательное поле),
	"content": "Обновленное содержание поста..." (необязательное поле),
	"imageUrl": "https://example.com/updated-image.jpg" (необязательное поле)
}
```
- **Успешный ответ**: `200 OK`
```json
{
	"id": 1,
	"title": "Обновленный заголовок",
	"content": "Обновленное содержание поста...",
	"imageUrl": "https://example.com/updated-image.jpg" (nullable),
	"blogId": 1,
	"blogTitle": "Мой блог",
	"authorUsername": "user123",
	"comments": 
	[
		{
			"id": 1,
			"content": "коммент говна",
			"authorUsername": "examplde_user",
			"createdAt": "2025-04-16T14:05:12.765352Z"
		},
		{
			"id": 2,
			"content": "комменdт говна",
			"authorUsername": "examplde_user",
			"createdAt": "2025-04-16T14:28:33.021375Z"
		}
	],
	"createdAt": "2025-04-14T14:00:00Z",
	"updatedAt": "2025-04-14T14:00:00Z",
	"commentsCount": 2
}
```

**Возможные коды ответов:**

200 OK - Пост успешно обновлен
401 Unauthorized - Отсутствие авторизации
404 Not Found - Пост не найден или не принадлежит пользователю

---
#### Удаление поста

- **URL**: `/api/post/{postId}`
- **Метод**: `DELETE`
- **Авторизация**: Требуется JWT токен
- **Описание**: Удаление поста
- **Успешный ответ**: `204 No Content`

**Возможные коды ответов:**

204 No Content - Пост успешно удален
401 Unauthorized - Отсутствие авторизации
404 Not Found - Пост не найден или не принадлежит пользователю

---
#### Получение поста по ID

- **URL**: `/api/Post/{postId}`
- **Метод**: `GET`
- **Описание**: Получение информации о посте по ID
- **Успешный ответ**: `200 OK`
```json
{
	"id": 1,
	"title": "Мой первый пост",
	"content": "Содержание поста...",
	"imageUrl": "https://example.com/image.jpg" (nullable),
	"blogId": 1,
	"blogTitle": "Мой блог",
	"authorUsername": "user123",
	"comments": 
	[
		{
			"id": 1,
			"content": "коммент говна",
			"authorUsername": "examplde_user",
			"createdAt": "2025-04-16T14:05:12.765352Z"
		},
		{
			"id": 2,
			"content": "комменdт говна",
			"authorUsername": "examplde_user",
			"createdAt": "2025-04-16T14:28:33.021375Z"
		}
	],
	"createdAt": "2025-04-14T14:00:00Z",
	"updatedAt": "2025-04-14T14:00:00Z",
	"commentsCount": 2
}
```

**Возможные коды ответов:**

200 OK - Успешный запрос
404 Not Found - Пост не найден

---
#### Получение постов по ID блога

- **URL**: `/api/Post/blog/{blogId}`
- **Метод**: `GET`
- **Описание**: Получение списка постов блога с пагинацией
- **Успешный ответ**: `200 OK`
```json
[
	{
		"id": 1,
		"title": "Мой первый пост",
		"content": "Содержание поста...",
		"imageUrl": "https://example.com/image.jpg" (nullable),
		"blogId": 1,
		"blogTitle": "Мой блог",
		"authorUsername": "user123",
		"createdAt": "2025-04-14T14:00:00Z",
		"updatedAt": "2025-04-14T14:00:00Z",
		"comments": []
		"commentsCount": 0
	},
	{
		"id": 2,
		"title": "Второй пост",
		"content": "Содержание второго поста...",
		"imageUrl": "https://example.com/image2.jpg",
		"blogId": 1,
		"blogTitle": "Мой блог",
		"authorUsername": "user123",
		"comments": 
		[
			{
			    "id": 1,
			    "content": "коммент говна",
			    "authorUsername": "examplde_user",
			    "createdAt": "2025-04-16T14:05:12.765352Z"
		    },
		    {
			    "id": 2,
			    "content": "комменdт говна",
			    "authorUsername": "examplde_user",
			    "createdAt": "2025-04-16T14:28:33.021375Z"
		    }
		],
		"createdAt": "2025-04-14T14:00:00Z",
		"updatedAt": "2025-04-14T14:00:00Z",
		"commentsCount": 2
	}
]
```

**Возможные коды ответов:**

200 OK - Успешный запрос

---
#### Получение всех постов

- **URL**: `/api/Post`
- **Метод**: `GET`
- **Описание**: Получение списка всех постов
- **Успешный ответ**: `200 OK`
```json
[
	{
		"id": 1,
		"title": "Мой первый пост",
		"content": "Содержание поста...",
		"imageUrl": "https://example.com/image.jpg" (nullable),
		"blogId": 1,
		"blogTitle": "Мой блог",
		"authorUsername": "user123",
		"comments": 
		[
			{
			    "id": 1,
			    "content": "коммент говна",
			    "authorUsername": "examplde_user",
			    "createdAt": "2025-04-16T14:05:12.765352Z"
		    },
		    {
			    "id": 2,
			    "content": "комменdт говна",
			    "authorUsername": "examplde_user",
			    "createdAt": "2025-04-16T14:28:33.021375Z"
		    }
		],
		"createdAt": "2025-04-14T14:00:00Z",
		"updatedAt": "2025-04-14T14:00:00Z",
		"commentsCount": 2
	},
	{
		"id": 2,
		"title": "Второй пост",
		"content": "Содержание второго поста...",
		"imageUrl": "https://example.com/image2.jpg" (nullable),
		"blogId": 1,
		"blogTitle": "Мой блог",
		"authorUsername": "user123",
		"createdAt": "2025-04-14T16:30:00Z",
		"updatedAt": "2025-04-14T16:30:00Z",
		"commentsCount": 0
	}
]
```

**Возможные коды ответов:**

200 OK - Успешный запрос

---
### Комментарии
---
#### Создание комментария

- **URL**: `/api/Comment/post/{postId}`
- **Метод**: `POST`
- **Авторизация**: Требуется JWT токен
- **Описание**: Создание нового комментария к посту
- **Запрос**:
```json
{
	"content": "Это хороший пост!"
}
```
- **Успешный ответ**: `200 OK`
```json
{
	"id": 1,
	"content": "Это хороший пост!",
	"authorUsername": "user123",
	"createdAt": "2025-04-14T17:00:00Z"
}
```
---
#### Обновление комментария

- **URL**: `/api/comment/{commentId}`
- **Метод**: `PUT`
- **Авторизация**: Требуется JWT токен
- **Описание**: Обновление существующего комментария
- **Запрос**:
```json
{
	"content": "Обновленный комментарий"
}
```
- **Успешный ответ**: `200 OK`
```json
{
	"id": 1,
	"content": "Обновленный комментарий",
	"authorUsername": "user123",
	"createdAt": "2025-04-14T17:00:00Z"
}
```

**Возможные коды ответов:**

200 OK - Комментарий успешно обновлен
401 Unauthorized - Отсутствие авторизации
404 Not Found - Комментарий не найден или не принадлежит пользователю

---
#### Удаление комментария

- **URL**: `/comments/{commentId}`
- **Метод**: `DELETE`
- **Авторизация**: Требуется JWT токен
- **Описание**: Удаление комментария
- **Успешный ответ**: `204 No Content`

**Возможные коды ответов:**

204 No Content - Комментарий успешно удален или не найден
401 Unauthorized - Отсутствие авторизации

---
#### Получение комментариев к посту

- **URL**: `/api/Comment/post/{postId}`
- **Метод**: `GET`
- **Описание**: Получение списка комментариев к посту
- **Успешный ответ**: `200 OK`
```json
[
	{
		"id": 1,
		"content": "Это хороший пост!",
		"authorUsername": "user123",
		"createdAt": "2025-04-14T17:00:00Z"
	},
	{
		"id": 2,
		"content": "Спасибо за информацию!",
		"authorUsername": "anotherUser",
		"createdAt": "2025-04-14T18:30:00Z"
	}
]
```

## Ограничения и лимиты

- Максимальный размер запроса: 10 МБ
- Лимит запросов: 100 запросов в минуту на IP-адрес
- Максимальное количество постов на блог: без ограничений
- Максимальное количество комментариев на пост: без ограничений

## Обработка ошибок

| Код ошибки | Описание                                                 |
| ---------- | -------------------------------------------------------- |
| 400        | Неверный запрос — проверьте параметры запроса            |
| 401        | Не авторизован — требуется авторизация                   |
| 403        | Запрещено — у вас нет прав для выполнения этого действия |
| 404        | Не найдено — запрашиваемый ресурс не существует          |
| 429        | Слишком много запросов — превышен лимит запросов         |
| 500        | Внутренняя ошибка сервера                                |
## Версионирование

Текущая версия API: v1